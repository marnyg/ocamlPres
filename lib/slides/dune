(executable
  (name test)
  (modes byte)
  (libraries js_of_ocaml js_of_ocaml-ppx)
  (preprocess (pps js_of_ocaml-ppx))
)

(rule
  (targets test.js)
  (action 
    (run
   %{bin:js_of_ocaml}
   --source-map
   %{dep:test.bc}
   -o
   %{targets}
   ; --opt 3
   ; --pretty
    )
  )
)

